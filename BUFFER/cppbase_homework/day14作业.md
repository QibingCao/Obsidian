第一题 **关于虚函数的描述中，正确的是（ D ）。**

A. 虚函数是一个静态成员函数

B. 虚函数是一个非成员函数

C. 虚函数既可以在函数声明定义，也可以在函数实现时定义

D. 派生类的虚函数与基类中对应的虚函数具有相同的参数个数和类型



第二题 **关于纯虚函数和抽象类的描述中，错误的是（ C ）。**

A. 纯虚函数是一种特殊的虚函数，它没有具体的实现

B. 抽象类是指具有纯虚函数的类

C. 一个基类中声明有纯虚函数，该基类派生类一定不再是抽象类

D. 抽象类只能作为基类来使用，其纯虚函数的实现由派生类给出





第三题 **在派生类中重新定义虚函数时必须在（ABE）方面与基类保持一致。(多选题)**

A. 参数个数

B. 参数类型

C. 参数名字

D. 操作内容

E. 返回类型





第四题 **一个类有几张虚函数表？请详细说明**

> 一个类可以没有虚函数表（没有虚函数就没有虚函数表）；
>
> 可以有一张虚函数表（即使这个类有多个虚函数，将这些虚函数的地址都存在虚函数表中）；
>
> 也可以有多张虚函数表（继承多个有虚函数的基类）
>
> <img src="https://bray07.oss-cn-beijing.aliyuncs.com/image-20231103114616212.png" alt="image-20231103114616212" style="zoom:67%;" />
>
> 
>
> <img src="https://bray07.oss-cn-beijing.aliyuncs.com/image-20231103114859866.png" alt="image-20231103114859866" style="zoom:67%;" />
>
> 
>
> 如果Base类有虚函数，Derived类虚拟继承Base类，Derived类中定义了新的虚函数，那么Derived类会多出一个虚函数指针，指向一张新的虚表
>
> ![image-20240321084336188](https://bray07.oss-cn-beijing.aliyuncs.com/undefined202403210843285.png)
>
> 





第五题 **带虚函数的单继承结构下，虚函数地址的存放规则是怎样？请用代码验证**

> Base类定义虚函数，那么Base对象的内存开始位置会有一个虚函数指针，指向一张虚函数表，将自己的虚函数入口地址按照声明的顺序存入其中；
>
> Derived继承Base类，Derived对象中会包含一个Base类的基类子对象，在这个Base对象中依然保留了这个虚函数指针，指向虚表，如果虚表中的虚函数被Derived类覆盖，对应位置记录的就是Derived类的虚函数地址。如果Derived类定义自己的新的虚函数，会加到这张虚表的最后位置。
>
> 如果是虚拟继承，那么Base类成为了虚基类，此时在Derived对象中基类子对象存到了内存最后的位置。虚函数指针、虚函数表、覆盖的规则依然不变。唯一不同的是，如果Derived类再定义新的虚函数，会在派生类自己的部分增加一个虚函数指针，指向一张新的虚表。





第六题 **带虚函数的多继承结构下，虚函数地址的存放规则是怎样？**

> > 1 .  每个基类都有自己的虚函数表
> >
> > 2 .  派生类如果有自己的虚函数，会被加入到第一个虚函数表之中
> >
> > <img src="https://bray07.oss-cn-beijing.aliyuncs.com/image-20231104102926431.png" alt="image-20231104102926431" style="zoom:80%;" />
> >
> > 3 .  内存布局中，其基类的布局按照基类被声明时的顺序进行排列（有虚函数的基类会往上放——希望尽快访问到虚函数）
> >
> > <img src="https://bray07.oss-cn-beijing.aliyuncs.com/image-20231104103142140.png" alt="image-20231104103142140" style="zoom: 80%;" />
> >
> > 4 .  派生类会覆盖基类的虚函数，只有第一个虚函数表中存放的是真实的被覆盖的函数的地址；其它的虚函数表中对应位置存放的并不是真实的对应的虚函数的地址，而是一条跳转指令
> >
> > <img src="https://bray07.oss-cn-beijing.aliyuncs.com/undefined202403210844375.png" alt="image-20240321084457332" style="zoom: 80%;" />
>
> 



